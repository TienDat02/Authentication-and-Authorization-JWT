<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="/css/admin-customer-management.css">
</head>
<body>
<div class="sidebar">
    <h2>Hello, Admin</h2>
    <a href="user-management">User</a>
    <a href="customer-management">Customer</a>
    <a href="/logout">Logout</a>
</div>
<div class="main-content">
    <h1>CUSTOMER MANAGEMENT</h1>
    <div class="controls">
        <input type="text" id="searchInput" placeholder="Search by name or ID...">
        <button onclick="searchCustomers()">Search</button>
        <button onclick="showCreateForm()">Create New Customer</button>
        <button onclick="showMassSalaryUpdateForm()">Mass Salary Update</button>
        <input type="number" id="minSalary" placeholder="Min Salary">
        <input type="number" id="maxSalary" placeholder="Max Salary">
        <button onclick="filterBySalary()">Filter by Salary</button>
        <button onclick="deleteSelectedCustomers()">Delete Customers</button>
    </div>
    <table>
        <thead>
        <tr>
            <th><input type="checkbox" id="selectAll"></th>
            <th>Index</th>
            <th>Customer ID</th>
            <th>Employee ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Permanent Address</th>
            <th>Temporary Address</th>
            <th>Phone</th>
            <th>Birthday</th>
            <th>Birth Place</th>
            <th>Gender</th>
            <th>Salary</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="customer, iterStat : ${customers}">
            <td><input type="checkbox" class="customer-checkbox" th:value="${customer.cif}"></td>
            <td th:text="${iterStat.count}"></td>
            <td th:text="${customer.cif}"></td>
            <td th:text="${customer.empNo}"></td>
            <td th:text="${customer.name}"></td>
            <td th:text="${customer.email}"></td>
            <td th:text="${customer.permAddress}"></td>
            <td th:text="${customer.tempAddress}"></td>
            <td th:text="${customer.phone}"></td>
            <td th:text="${#temporals.format(customer.birthday, 'yyyy-MM-dd')}"></td>
            <td th:text="${customer.birthPlace}"></td>
            <td th:text="${customer.gender}"></td>
            <td th:text="${#numbers.formatDecimal(customer.salary, 1, 'COMMA', 2, 'POINT')}"></td>
            <td>
                <button th:onclick="'showUpdateForm(' + ${customer.cif} + ')'">Update</button>
                <button th:onclick="'deleteCustomer(' + ${customer.cif} + ')'">Delete</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- Create Form Modal -->
<div id="createFormModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="hideCreateForm()">&times;</span>
        <h2>Create New Customer</h2>
        <form id="createCustomerForm">
            <div class="form-group">
                <label for="empNo">Employee ID:</label>
                <input type="text" id="empNo" name="empNo" required>
            </div>
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="permAddress">Permanent Address:</label>
                <input type="text" id="permAddress" name="permAddress" required>
            </div>
            <div class="form-group">
                <label for="tempAddress">Temporary Address:</label>
                <input type="text" id="tempAddress" name="tempAddress" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone:</label>
                <input type="text" id="phone" name="phone" required>
            </div>
            <div class="form-group">
                <label for="birthday">Birthday:</label>
                <input type="date" id="birthday" name="birthday" required>
            </div>
            <div class="form-group">
                <label for="birthPlace">Birth Place:</label>
                <input type="text" id="birthPlace" name="birthPlace" required>
            </div>
            <div class="form-group">
                <label for="gender">Gender:</label>
                <select id="gender" name="gender" required>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
            <div class="form-group">
                <label for="salary">Salary:</label>
                <input type="number" id="salary" name="salary" required>
            </div>
            <button type="submit">Create</button>
            <button type="button" onclick="hideCreateForm()">Cancel</button>
        </form>
    </div>
</div>

<!-- Update Form Modal -->
<div id="updateFormModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="hideUpdateForm()">&times;</span>
        <h2>Update Customer</h2>
        <form id="updateCustomerForm">
            <div class="form-group">
                <label for="updateCif">Customer ID:</label>
                <input type="text" id="updateCif" name="cif" readonly>
            </div>
            <div class="form-group">
                <label for="updateEmpNo">Employee ID:</label>
                <input type="text" id="updateEmpNo" name="empNo" required>
            </div>
            <div class="form-group">
                <label for="updateName">Name:</label>
                <input type="text" id="updateName" name="name" required>
            </div>
            <div class="form-group">
                <label for="updateEmail">Email:</label>
                <input type="email" id="updateEmail" name="email" required>
            </div>
            <div class="form-group">
                <label for="updatePermAddress">Permanent Address:</label>
                <input type="text" id="updatePermAddress" name="permAddress" required>
            </div>
            <div class="form-group">
                <label for="updateTempAddress">Temporary Address:</label>
                <input type="text" id="updateTempAddress" name="tempAddress" required>
            </div>
            <div class="form-group">
                <label for="updatePhone">Phone:</label>
                <input type="text" id="updatePhone" name="phone" required>
            </div>
            <div class="form-group">
                <label for="updateBirthday">Birthday:</label>
                <input type="date" id="updateBirthday" name="birthday" required>
            </div>
            <div class="form-group">
                <label for="updateBirthPlace">Birth Place:</label>
                <input type="text" id="updateBirthPlace" name="birthPlace" required>
            </div>
            <div class="form-group">
                <label for="updateGender">Gender:</label>
                <select id="updateGender" name="gender" required>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
            <div class="form-group">
                <label for="updateSalary">Salary:</label>
                <input type="number" id="updateSalary" name="salary" required>
            </div>
            <button type="submit">Update</button>
            <button type="button" onclick="hideUpdateForm()">Cancel</button>
        </form>
    </div>
</div>

<!-- Mass Salary Update Modal -->
<div id="massSalaryUpdateModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="hideMassSalaryUpdateForm()">&times;</span>
        <h2>Mass Salary Update</h2>

        <h3>Selected Customers</h3>
        <table id="selectedCustomersTable">
            <thead>
            <tr>
                <th>Index</th>
                <th>Customer ID</th>
                <th>Employee ID</th>
                <th>Name</th>
                <th>Salary</th>
            </tr>
            </thead>
            <tbody>
            <!-- Selected customers will be populated here -->
            </tbody>
        </table>

        <div class="tab">
            <button class="tablinks" onclick="openTab(event, 'fixedUpdate')">Fixed Update</button>
            <button class="tablinks" onclick="openTab(event, 'raiseDeduction')">Raise/Deduction</button>
        </div>

        <div id="fixedUpdate" class="tabcontent">
            <h3>Fixed Salary Update</h3>
            <form id="fixedUpdateForm">
                <label for="fixedSalary">New Salary:</label>
                <input type="number" id="fixedSalary" name="fixedSalary" required>
                <button type="submit">Update</button>
            </form>
        </div>

        <div id="raiseDeduction" class="tabcontent">
            <h3>Salary Raise/Deduction</h3>
            <form id="raiseDeductionForm">
                <label for="amount">Amount:</label>
                <input type="number" id="amount" name="amount" required>
                <select id="operation" name="operation">
                    <option value="raise">Raise</option>
                    <option value="deduction">Deduction</option>
                </select>
                <button type="submit">Apply</button>
            </form>
        </div>
    </div>
</div>

<script src="/js/admin-customer-management.js"></script>
</body>
</html>